{"version":3,"sources":["../../../../../../../../OneDrive/Pictures/testing-server/frontend/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","../../../../../../../../OneDrive/Pictures/testing-server/frontend/src/lib/api.ts","../../../../../../../../OneDrive/Pictures/testing-server/frontend/src/actions/appointment.ts"],"sourcesContent":["// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","/**\r\n * API Configuration & Helper Functions\r\n * Centralized API calls to backend\r\n */\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n\r\n// ============== TYPES ==============\r\nexport interface Hero {\r\n  id?: number;\r\n  title?: string; // Made optional to prevent build errors on empty returns\r\n  title_highlight?: string;\r\n  description?: string;\r\n  logo_text?: string;\r\n  logo_image_url?: string;\r\n  doctor_image_url?: string;\r\n  members_treated_count?: number;\r\n  members_treated_label?: string;\r\n  virtual_patients_count?: number;\r\n  virtual_patients_label?: string;\r\n  licensed_doctors_count?: number;\r\n  licensed_doctors_label?: string;\r\n  banner_image_url?: string;\r\n  register_button_text?: string;\r\n}\r\n\r\nexport interface Navbar {\r\n  logo_image_url?: string;\r\n  logo_text?: string;\r\n}\r\n\r\nexport interface About {\r\n  id?: number;\r\n  subtitle?: string;\r\n  title?: string;\r\n  description?: string;\r\n  image_url?: string;\r\n  paragraph1?: string;\r\n  paragraph2?: string;\r\n  statistic1_numbers?: string;\r\n  statistic1_suffix?: string;\r\n  statistic1_description?: string;\r\n  statistic2_numbers?: string;\r\n  statistic2_suffix?: string;\r\n  statistic2_description?: string;\r\n  statistic3_numbers?: string;\r\n  statistic3_suffix?: string;\r\n  statistic3_description?: string;\r\n}\r\n\r\nexport interface Service {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  icon_url?: string;\r\n  key?: string;\r\n  features: string[];\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\nexport interface Appointment {\r\n  id?: number;\r\n  title?: string;\r\n  subtitle?: string;\r\n  form_name_label?: string;\r\n  form_name_placeholder?: string;\r\n  form_email_label?: string;\r\n  form_email_placeholder?: string;\r\n  form_phone_label?: string;\r\n  form_phone_placeholder?: string;\r\n  form_service_label?: string;\r\n  form_service_placeholder?: string;\r\n  form_date_label?: string;\r\n  form_date_placeholder?: string;\r\n  form_time_label?: string;\r\n  form_time_placeholder?: string;\r\n  form_message_label?: string;\r\n  form_message_placeholder?: string;\r\n  form_button_text?: string;\r\n}\r\n\r\nexport interface Contact {\r\n  id?: number;\r\n  title?: string;\r\n  subtitle?: string;\r\n  phone_label?: string;\r\n  phone?: string;\r\n  email_label?: string;\r\n  email?: string;\r\n  address_label?: string;\r\n  address?: string;\r\n  form_name_label?: string;\r\n  form_email_label?: string;\r\n  form_phone_label?: string;\r\n  form_subject_label?: string;\r\n  form_message_label?: string;\r\n  contact_image_url?: string;\r\n}\r\n\r\nexport interface Feedback {\r\n  id: number;\r\n  name: string;\r\n  location?: string;\r\n  text: string;\r\n  rating?: number;\r\n  image_url?: string;\r\n  created_at: string;\r\n  updated_at?: string;\r\n}\r\n\r\nexport interface Blog {\r\n  id: number;\r\n  title: string;\r\n  category: string;\r\n  content?: string;\r\n  short_description?: string;\r\n  image_url?: string;\r\n  language_code?: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\nexport interface AppointmentSubmission {\r\n  name: string;\r\n  email: string;\r\n  phone: string;\r\n  service: string;\r\n  date: string;\r\n  time: string;\r\n  doctor?: string;\r\n  notes?: string;\r\n}\r\n\r\nexport interface ContactSubmission {\r\n  name: string;\r\n  email: string;\r\n  subject: string;\r\n  number: string;\r\n  text: string;\r\n}\r\n\r\n// ============== HERO ENDPOINTS ==============\r\nexport async function getHero(language: string = 'az'): Promise<Hero> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/hero?lang=${language}`);\r\n    if (!response.ok) throw new Error('Failed to fetch hero');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching hero:', error);\r\n    return {}; // Now valid because Hero properties are optional\r\n  }\r\n}\r\n\r\n// ============== NAVBAR ENDPOINTS ==============\r\nexport async function getNavbar(): Promise<Navbar> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/navbar`);\r\n    if (!response.ok) throw new Error('Failed to fetch navbar');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching navbar:', error);\r\n    return { logo_image_url: '/images/logo.png', logo_text: 'Dr. Ayt…ôn Abdullayeva' };\r\n  }\r\n}\r\n\r\n// ============== ABOUT ENDPOINTS ==============\r\nexport async function getAbout(language: string = 'az'): Promise<About> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/about?lang=${language}`);\r\n    if (!response.ok) throw new Error('Failed to fetch about');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching about:', error);\r\n    return {};\r\n  }\r\n}\r\n\r\n// ============== SERVICES ENDPOINTS ==============\r\nexport async function getServices(language: string = 'az'): Promise<Service[]> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/services?lang=${language}`);\r\n    if (!response.ok) throw new Error('Failed to fetch services');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching services:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getService(id: number, language: string = 'az'): Promise<Service | null> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/services/${id}?lang=${language}`);\r\n    if (!response.ok) throw new Error('Failed to fetch service');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching service:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// ============== APPOINTMENT ENDPOINTS ==============\r\nexport async function getAppointmentConfig(language: string = 'az'): Promise<Appointment> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/appointment?lang=${language}`);\r\n    if (!response.ok) throw new Error('Failed to fetch appointment config');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching appointment config:', error);\r\n    return {};\r\n  }\r\n}\r\n\r\nexport async function submitAppointment(data: AppointmentSubmission): Promise<{ success: boolean; message?: string }> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/appointment`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error || 'Failed to submit appointment');\r\n    }\r\n\r\n    return { success: true, message: 'Appointment submitted successfully' };\r\n  } catch (error) {\r\n    console.error('Error submitting appointment:', error);\r\n    return { \r\n      success: false, \r\n      message: error instanceof Error ? error.message : 'Failed to submit appointment'\r\n    };\r\n  }\r\n}\r\n\r\n// ============== CONTACT ENDPOINTS ==============\r\nexport async function getContactInfo(language: string = 'az'): Promise<Contact> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/contact?lang=${language}`);\r\n    if (!response.ok) throw new Error('Failed to fetch contact info');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching contact info:', error);\r\n    return {};\r\n  }\r\n}\r\n\r\nexport async function submitContact(data: ContactSubmission): Promise<{ success: boolean; message?: string }> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/contact`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error || 'Failed to submit contact form');\r\n    }\r\n\r\n    return { success: true, message: 'Message sent successfully' };\r\n  } catch (error) {\r\n    console.error('Error submitting contact form:', error);\r\n    return { \r\n      success: false, \r\n      message: error instanceof Error ? error.message : 'Failed to submit contact form'\r\n    };\r\n  }\r\n}\r\n\r\n// ============== FEEDBACKS ENDPOINTS ==============\r\nexport async function getFeedbacks(): Promise<Feedback[]> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/feedbacks`);\r\n    if (!response.ok) throw new Error('Failed to fetch feedbacks');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching feedbacks:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getFeedback(id: number): Promise<Feedback | null> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/feedbacks/${id}`);\r\n    if (!response.ok) throw new Error('Failed to fetch feedback');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching feedback:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// ============== BLOGS ENDPOINTS ==============\r\nexport async function getBlogs(language: string = 'az'): Promise<Blog[]> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/blogs?lang=${language}`);\r\n    if (!response.ok) throw new Error('Failed to fetch blogs');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching blogs:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getBlog(id: number, language: string = 'az'): Promise<Blog | null> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/blogs/${id}?lang=${language}`);\r\n    if (!response.ok) throw new Error('Failed to fetch blog');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching blog:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// ============== EXPORT ENDPOINTS ==============\r\nexport async function exportAllData() {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/export`);\r\n    if (!response.ok) throw new Error('Failed to export data');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error exporting data:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// ============== HEALTH CHECK ==============\r\nexport async function checkBackendHealth(): Promise<boolean> {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/health`);\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('Backend health check failed:', error);\r\n    return false;\r\n  }\r\n}","\"use server\";\r\n\r\nimport { redirect } from \"next/navigation\";\r\nimport { submitAppointment } from \"@/lib/api\";\r\n\r\nexport async function handleAppointment(formData: FormData) {\r\n    const name = String(formData.get(\"name\") || \"\").trim();\r\n    const email = String(formData.get(\"email\") || \"\").trim();\r\n    const phone = String(formData.get(\"phone\") || \"\").trim();\r\n    const service = String(formData.get(\"service\") || \"\");\r\n    const date = String(formData.get(\"date\") || \"\").trim();\r\n    const time = String(formData.get(\"time\") || \"\").trim();\r\n    const doctor = String(formData.get(\"doctor\") || \"\").trim();\r\n    const notes = String(formData.get(\"notes\") || \"\").trim();\r\n    const agree = formData.get(\"agree\") === \"on\";\r\n\r\n    try {\r\n        // Validate required fields\r\n        if (!name || !email || !phone || !service || !date) {\r\n            throw new Error(\"Missing required fields\");\r\n        }\r\n\r\n        // Submit to backend API\r\n        const result = await submitAppointment({\r\n            name,\r\n            email,\r\n            phone,\r\n            service,\r\n            date,\r\n            time,\r\n            doctor,\r\n            notes,\r\n        });\r\n\r\n        if (!result.success) {\r\n            throw new Error(result.message || \"Failed to submit appointment\");\r\n        }\r\n\r\n        redirect(\"/thank-you\");\r\n    } catch (error) {\r\n        console.error(\"[Appointment Error]\", error);\r\n        // TODO: Show error message to user\r\n        redirect(\"/thank-you?error=appointment-failed\");\r\n    }\r\n}\r\n"],"names":["ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0]}